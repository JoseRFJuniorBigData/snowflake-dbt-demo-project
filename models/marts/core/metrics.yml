version: 2

metrics:
  - name: revenue
    label: Revenue
    model: ref('fct_order_items')

    calculation_method: sum
    expression: gross_item_sales_amount

    timestamp: order_date
    time_grains: [day, week, month, quarter, year]

    dimensions:
      - return_flag
      - order_item_status_code
      - supplier_key
      - ship_mode
    
  - name: customers
    label: Customers
    model: ref('fct_order_items')

    calculation_method: count_distinct
    expression: customer_key
    
    timestamp: order_date
    time_grains: [day, week, month, quarter, year]

    dimensions:
      - return_flag
      - order_item_status_code
      - supplier_key
      - ship_mode
